<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>
<?import com.jfoenix.controls.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<!--
    Vista principal de AudioFlow
    Compatible con Scene Builder - Puedes abrir este archivo en Scene Builder para editarlo visualmente.
    
    NOTA PARA SCENE BUILDER:
    1. Abre Scene Builder
    2. Ve a Library → JAR/FXML Manager → Add Library/FXML from file system
    3. Agrega los JARs de JFoenix e Ikonli desde tu carpeta .m2/repository
-->

<StackPane fx:id="rootPane" 
           xmlns="http://javafx.com/javafx/21" 
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.audioflow.controller.MainController"
           styleClass="root-pane">

    <BorderPane styleClass="main-container">
        
        <!-- ==================== BARRA LATERAL IZQUIERDA ==================== -->
        <left>
            <VBox styleClass="sidebar" spacing="10" prefWidth="280">
                <padding><Insets top="20" right="15" bottom="20" left="15"/></padding>
                
                <!-- Logo / Título -->
                <HBox alignment="CENTER_LEFT" spacing="10" styleClass="logo-container">
                    <FontIcon iconLiteral="fas-music" iconSize="28" styleClass="logo-icon"/>
                    <Label text="AudioFlow" styleClass="app-title"/>
                </HBox>
                
                <Separator styleClass="sidebar-separator"/>
                
                <!-- Título de Playlist -->
                <Label text="TU BIBLIOTECA" styleClass="section-title"/>
                
                <!-- Lista de Canciones -->
                <JFXListView fx:id="songListView" 
                             styleClass="song-list" 
                             VBox.vgrow="ALWAYS"/>
                
                <!-- Hint de Drag & Drop (cuando está vacío) -->
                <VBox fx:id="dropZone" styleClass="drop-zone" alignment="CENTER" spacing="10">
                    <FontIcon iconLiteral="fas-cloud-upload-alt" iconSize="48" styleClass="drop-icon"/>
                    <Label fx:id="dropHintLabel" text="Arrastra archivos MP3 aquí" styleClass="drop-hint"/>
                    <Label text="o carpetas con música" styleClass="drop-hint-sub"/>
                </VBox>
            </VBox>
        </left>
        
        <!-- ==================== ÁREA CENTRAL ==================== -->
        <center>
            <VBox styleClass="center-area" alignment="CENTER">
                <padding><Insets top="40" right="40" bottom="20" left="40"/></padding>
                
                <!-- Carátula del álbum (placeholder por ahora) -->
                <StackPane styleClass="album-art-container" prefWidth="300" prefHeight="300">
                    <VBox alignment="CENTER" spacing="10">
                        <FontIcon iconLiteral="fas-compact-disc" iconSize="120" styleClass="album-placeholder-icon"/>
                        <Label text="No hay canción seleccionada" styleClass="album-placeholder-text"/>
                    </VBox>
                </StackPane>
                
                <Region VBox.vgrow="ALWAYS"/>
                
                <!-- Información de la canción actual -->
                <VBox fx:id="nowPlayingInfo" alignment="CENTER" spacing="5" styleClass="now-playing-info">
                    <Label fx:id="songTitleLabel" text="Sin canción" styleClass="song-title"/>
                    <Label fx:id="artistLabel" text="Arrastra archivos MP3 para comenzar" styleClass="artist-name"/>
                </VBox>
                
            </VBox>
        </center>
        
        <!-- ==================== BARRA INFERIOR - CONTROLES ==================== -->
        <bottom>
            <VBox styleClass="player-bar" spacing="10">
                <padding><Insets top="15" right="30" bottom="15" left="30"/></padding>
                
                <!-- Barra de progreso -->
                <HBox alignment="CENTER" spacing="10">
                    <Label fx:id="currentTimeLabel" text="0:00" styleClass="time-label"/>
                    <JFXSlider fx:id="progressSlider" min="0" max="100" value="0" 
                               HBox.hgrow="ALWAYS" styleClass="progress-slider"/>
                    <Label fx:id="totalTimeLabel" text="0:00" styleClass="time-label"/>
                </HBox>
                
                <!-- Controles de reproducción -->
                <HBox alignment="CENTER" spacing="20">
                    
                    <!-- Botón Shuffle -->
                    <JFXButton fx:id="shuffleBtn" onAction="#handleShuffle" styleClass="control-btn-secondary">
                        <graphic><FontIcon iconLiteral="fas-random" iconSize="18"/></graphic>
                    </JFXButton>
                    
                    <!-- Botón Anterior -->
                    <JFXButton fx:id="prevBtn" onAction="#handlePrevious" styleClass="control-btn">
                        <graphic><FontIcon iconLiteral="fas-step-backward" iconSize="24"/></graphic>
                    </JFXButton>
                    
                    <!-- Botón Play/Pause (principal) -->
                    <JFXButton fx:id="playPauseBtn" onAction="#handlePlayPause" styleClass="play-btn">
                        <graphic><FontIcon fx:id="playPauseIcon" iconLiteral="fas-play" iconSize="28"/></graphic>
                    </JFXButton>
                    
                    <!-- Botón Siguiente -->
                    <JFXButton fx:id="nextBtn" onAction="#handleNext" styleClass="control-btn">
                        <graphic><FontIcon iconLiteral="fas-step-forward" iconSize="24"/></graphic>
                    </JFXButton>
                    
                    <!-- Espacio flexible -->
                    <Region HBox.hgrow="ALWAYS"/>
                    
                    <!-- Control de Volumen -->
                    <HBox alignment="CENTER" spacing="10" styleClass="volume-control">
                        <JFXButton onAction="#handleMute" styleClass="control-btn-secondary">
                            <graphic><FontIcon fx:id="volumeIcon" iconLiteral="fas-volume-up" iconSize="18"/></graphic>
                        </JFXButton>
                        <JFXSlider fx:id="volumeSlider" min="0" max="100" value="70" 
                                   prefWidth="100" styleClass="volume-slider"/>
                    </HBox>
                    
                </HBox>
            </VBox>
        </bottom>
        
    </BorderPane>
    
</StackPane>
